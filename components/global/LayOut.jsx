import Head from 'next/head';
import NavBar from './NavBar';
import React from 'react';
import { initFirebase } from "../../services/firebase";
import { GoogleAuthProvider , getAuth , signInWithPopup } from "firebase/auth";
import { useAuthState } from 'react-firebase-hooks/auth';
import { logOutExternal } from '../Auth/logOut';
import { signInGoogleExternal } from '../Auth/signInWithGoogleExternal';

const Layout = ({ children }) => {
  initFirebase();
  const auth = getAuth(); // instance of auth method
  const [user, loading] = useAuthState(auth);
  console.log('user: ', user);

  const signInGoogle = () => {
    signInGoogleExternal(auth)
  };

  const logOut = () => {
    logOutExternal(auth)
  };

  return (
    <div className='w-screen h-screen flex flex-col bg-dokuso-white'>
      <Head>
        <title>Dokus≈ç</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="" />
      </Head>
      <NavBar signInGoogle={signInGoogle} logOut={logOut} user={user}/>
      <main className='flex flex-col flex-auto p-0 m-0 overflow-auto scrollbar'>{children}</main>
    </div>
  )
}

export default Layout;